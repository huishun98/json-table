(function(e){function t(t){for(var a,s,l=t[0],i=t[1],c=t[2],d=0,f=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/json-table/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid",attrs:{id:"app"}},[n("div",{staticClass:"theme pad-30 bold-link",attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home")])],1),n("router-view")],1)},o=[],s=(n("034f"),n("2877")),l={},i=Object(s["a"])(l,r,o,!1,null,null,null),c=i.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container theme"},[n("h1",[e._v("JSON to Table")]),e._m(0),e._m(1),n("b-form-input",{attrs:{placeholder:"Enter json url"},model:{value:e.queryUrl,callback:function(t){e.queryUrl=t},expression:"queryUrl"}}),n("b-button",{attrs:{squared:"",variant:"outline-secondary"},on:{click:e.enter}},[e._v("Convert")])],1)},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"p"},[e._v(" This website transforms ugly JSON into pretty, readable tables. Best viewed on desktop."),n("br"),e._v(" This project is open source and the code is "),n("a",{attrs:{href:"https://github.com/huishun98/json-table",target:"_blank"}},[e._v("available on Github")]),e._v(". ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"p"},[e._v(" To use this tool, either: "),n("br"),e._v(" 1. Enter the JSON API endpoint in the input field below and convert, or "),n("br"),e._v(' 2. Prepend "https://huishun98.github.io/json-table/" to the JSON API endpoint and search using the web browser\'s address bar. ')])}],h={name:"Home",data:function(){return{queryUrl:""}},methods:{enter:function(){this.queryUrl.length>0?this.$router.push({name:"Url",params:{queryUrl:this.queryUrl}}):alert("Please enter a URL!")}}},p=h,b=Object(s["a"])(p,d,f,!1,null,null,null),v=b.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"url"},[n("h2",{staticClass:"margin-bot-10"},[e._v(e._s(e.queryUrl))]),n("div",{staticClass:"margin-bot-10"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],attrs:{squared:"",variant:"outline-secondary"},on:{click:e.downloadJson}},[e._v("Download JSON")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],attrs:{squared:"",variant:"outline-secondary"},on:{click:e.downloadCsv}},[e._v("Download CSV")])],1),n("b-spinner",{staticClass:"margin-top-50",class:{"d-none":!e.loading},attrs:{variant:"success"}}),e._l(e.collatedInfo,(function(t,a){return n("div",{key:a,staticClass:"small-text"},[n("div",{staticClass:"title",class:{specialbg:t.header.includes(e.firstLevelText)}},[e._v(" "+e._s(t.header)+" ")]),n("div",{staticClass:"table-wrapper"},[n("b-table",{attrs:{striped:"",hover:"",items:t.info}})],1)])}))],2)},m=[],g=n("b85c"),w=(n("b64b"),n("d3b7"),n("a9e3"),n("d81d"),n("99af"),n("fb6a"),n("a15b"),n("3ca3"),n("ddb0"),n("2b3d"),n("bc3a")),j=n.n(w),_={name:"Url",props:["queryUrl"],data:function(){return{firstLevelText:"Origin",downloadFileName:"json-table",loading:!0,success:!1,callCount:0,collatedInfo:[],jsonData:null}},mounted:function(){this.fetchData(this.queryUrl)},methods:{fetchData:function(e){var t=this;this.callCount=this.callCount+1,j.a.get(e).then((function(e){t.loading=!1,t.success=!0,t.callCount=0,t.jsonData=e.data,t.generateData(t.firstLevelText,e.data),console.log(e.data)})).catch((function(n){if(n.status||t.callCount>2)return console.log(n),t.callCount=0,t.loading=!1,void alert("Error encountered while fetching data");t.fetchData("https://api.allorigins.win/raw?url="+e)}))},getHeaders:function(e){return Object.keys(e)},type:function(e){var t=Object.prototype.toString.call(e);switch(t){case"[object Array]":return Array;case"[object String]":return String;case"[object Number]":return Number;case"[object Object]":return Object;case"[object Boolean]":return Boolean;default:return null}},generateData:function(e,t){if(this.type(t)==Array&&1==t.length)this.generateData(e,t[0]);else if(this.type(t)==Array){var n=t;this.type(t[0])!=String&&this.type(t[0])!=Number&&this.type(t[0])!=Boolean||(n=t.map((function(e){return{value:e}})));var a=n.length>1e3?"(".concat(n.length," rows in total, showing first 1000)"):"";this.collatedInfo.push({header:"".concat(e," ").concat(a),info:n.slice(0,2e3)})}else if(this.type(t)==Object){var r,o=this.getHeaders(t),s={},l=Object(g["a"])(o);try{for(l.s();!(r=l.n()).done;){var i=r.value,c=t[i];this.type(c)!=String&&this.type(c)!=Number&&this.type(c)!=Boolean?(this.type(c)==Object||this.type(c)==Array)&&this.generateData(i,t[i]):s[i]=c}}catch(u){l.e(u)}finally{l.f()}Object.keys(s).length>0&&this.collatedInfo.unshift({header:e,info:Array(s)})}},downloadJson:function(){var e=JSON.stringify(this.jsonData);this.handleDownload(this.downloadFileName,"json",e)},downloadCsv:function(){var e,t=this,n=Object(g["a"])(this.collatedInfo);try{for(n.s();!(e=n.n()).done;){var a=e.value;console.log({tableInfo:a});for(var r=a.info,o=Object.keys(r[0]),s="\ufeff".concat(o.join(),"\n"),l=function(e){var n=r[e],a=o.map((function(e){return null===n[e]?null:t.type(n[e])==Object?JSON.stringify([n[e]]):[n[e]]})).join(",");s+="".concat(a,"\n")},i=0;i<r.length;i++)l(i);this.handleDownload(this.downloadFileName+"-"+a.header,"csv",s)}}catch(c){n.e(c)}finally{n.f()}},handleDownload:function(e,t,n){var a=new Blob([n],{type:"application/".concat(this.fileType)}),r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download="".concat(e,".").concat(t),r.click()}}},O=_,C=Object(s["a"])(O,y,m,!1,null,null,null),S=C.exports;a["default"].use(u["a"]);var U=[{path:"/",redirect:{name:"Home"}},{path:"/json-table/",name:"Home",component:v},{path:"/json-table/:queryUrl(.*)",name:"Url",component:S,props:!0}],k=new u["a"]({mode:"history",routes:U}),x=k,N=n("5f5b"),D=(n("f9e3"),n("2dd8"),n("0284")),q=n.n(D);a["default"].use(q.a,{id:"UA-201887797-1",router:x}),a["default"].use(N["a"]),a["default"].config.productionTip=!1,new a["default"]({router:x,render:function(e){return e(c)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.40ecab0b.js.map